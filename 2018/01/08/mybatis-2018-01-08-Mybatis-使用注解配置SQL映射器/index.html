<!DOCTYPE html>




<html class="theme-next pisces" lang="zh-Hans">
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">
















  
  
    
  
  <link href="https://cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.min.css" rel="stylesheet" type="text/css">




  
  
  
  

  

  

  

  

  

  
    

    
  

  
    
    
    <link href="//fonts.cat.net/css?family=Sigmar One:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






  

<link href="https://cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.css" rel="stylesheet" type="text/css">



  

<link href="https://cdn.bootcss.com/social-share.js/1.0.9/css/share.min.css" rel="stylesheet" type="text/css">

<link href="/css/main.css?v=0.0.4" rel="stylesheet" type="text/css">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=0.0.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon.ico?v=0.0.4">


  <link rel="mask-icon" href="/images/logo.svg?v=0.0.4" color="#222">





  <meta name="keywords" content="Mybatis,">










<meta name="description" content="在映射器 Mapper 接口上使用 @Mapper 注解映射语句MyBatis 提供了多种注解来支持不同类型的语句(statement)如 SELECT，INSERT，UPDATE，DELETE。 @Insert我们可以使用 @Insert 注解来定义一个 INSERT 映射语句：  123456789101112131415161718192021222324252627282930313233">
<meta name="keywords" content="Mybatis">
<meta property="og:type" content="article">
<meta property="og:title" content="Mybatis - 使用注解配置 SQL 映射器">
<meta property="og:url" content="https://wuchao.github.io/2018/01/08/mybatis-2018-01-08-Mybatis-使用注解配置SQL映射器/index.html">
<meta property="og:site_name" content="Keep Coding">
<meta property="og:description" content="在映射器 Mapper 接口上使用 @Mapper 注解映射语句MyBatis 提供了多种注解来支持不同类型的语句(statement)如 SELECT，INSERT，UPDATE，DELETE。 @Insert我们可以使用 @Insert 注解来定义一个 INSERT 映射语句：  123456789101112131415161718192021222324252627282930313233">
<meta property="og:locale" content="zh-Hans">
<meta property="og:updated_time" content="2019-09-06T13:10:44.740Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Mybatis - 使用注解配置 SQL 映射器">
<meta name="twitter:description" content="在映射器 Mapper 接口上使用 @Mapper 注解映射语句MyBatis 提供了多种注解来支持不同类型的语句(statement)如 SELECT，INSERT，UPDATE，DELETE。 @Insert我们可以使用 @Insert 注解来定义一个 INSERT 映射语句：  123456789101112131415161718192021222324252627282930313233">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    version: '0.0.4',
    sidebar: {"position":"right","display":"always","offset":52,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":false,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    since: '8/10/2019 20:40:00',
    onlineAPI: '',
    site: {
      title: 'Keep Coding',
      subtitle: '',
      author: 'wuchao'
    },
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    },
    leancloud: {
      enable: false,
      appID: '',
      appKey: ''
    },
    favicon: {
      visibilitychange: true,
      narmal: '/images/favicon.ico',
      hidden: '/images/failure.ico',
      show_text: '(/≧▽≦/)咦！又好了！',
      hide_text: '(●—●)喔哟，崩溃啦！'
    }
  };
</script>



  
    <script type="text/javascript" src="https://cdn.bootcss.com/jquery/2.1.3/jquery.min.js"></script>




  <link rel="canonical" href="https://wuchao.github.io/2018/01/08/mybatis-2018-01-08-Mybatis-使用注解配置SQL映射器/">





  <title>Mybatis - 使用注解配置 SQL 映射器 | Keep Coding</title>
  




<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
          m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-48084758-7', 'auto');
  ga('send', 'pageview');
</script>





</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-right page-post-detail">
    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br>
            
            Home
          </a>
        </li>
      
        
        <li class="menu-item menu-item-归档">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br>
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-分类">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br>
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-标签">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br>
            
            标签
          </a>
        </li>
      

      
      <li class="menu-item search">
          <form class="search-form">
            <input name="keyword" type="text" class="search-input" placeholder="站内搜索">
            <button type="submit" class="search-submit"><i class="fa fa-search"></i></button>
          </form>
      </li>
    </ul>
  

  
</nav>

<div class="site-brand-wrapper" style="background-image: url(/images/header-sagiri.jpg)">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <div class="brand">
        <span class="logo-line-before"><i></i></span>
        <div class="site-title">
          <div id="animate" class="animate">
            <span>K</span><span>e</span><span>e</span><span>p</span><span> </span><span>C</span><span>o</span><span>d</span><span>i</span><span>n</span><span>g</span>
          </div>
          <div id="guide" class="guide">
            <span>K</span><span>e</span><span>e</span><span>p</span><span> </span><span>C</span><span>o</span><span>d</span><span>i</span><span>n</span><span>g</span>
          </div>
        </div>
        <span class="logo-line-after"><i></i></span>
      </div>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>


 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-date">
			<div class="post-month">01月</div>
			<div class="post-day">08</div>
	</div>
  
  <div class="post-badge">
    
      <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
        <a href="/categories/Mybatis/" itemprop="url" rel="index">
          <span itemprop="name">Mybatis</span>
        </a>
      </span>
    
  </div>
  

  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://wuchao.github.io/2018/01/08/mybatis-2018-01-08-Mybatis-使用注解配置SQL映射器/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="wuchao">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/DIYgod.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Keep Coding">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">Mybatis - 使用注解配置 SQL 映射器</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-01-08T00:00:00+08:00">
                2018-01-08
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">•</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Mybatis/" itemprop="url" rel="index">
                    <span itemprop="name">Mybatis</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <h2 id="在映射器-Mapper-接口上使用-Mapper-注解"><a href="#在映射器-Mapper-接口上使用-Mapper-注解" class="headerlink" title="在映射器 Mapper 接口上使用 @Mapper 注解"></a>在映射器 Mapper 接口上使用 @Mapper 注解</h2><h2 id="映射语句"><a href="#映射语句" class="headerlink" title="映射语句"></a>映射语句</h2><p>MyBatis 提供了多种注解来支持不同类型的语句(statement)如 SELECT，INSERT，UPDATE，DELETE。</p>
<h3 id="Insert"><a href="#Insert" class="headerlink" title="@Insert"></a>@Insert</h3><p>我们可以使用 <code>@Insert</code> 注解来定义一个 INSERT 映射语句： </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br></pre></td><td class="code"><pre><span class="line">package com.mybatis3.mappers;  </span><br><span class="line">public interface StudentMapper &#123;  </span><br><span class="line">    @Insert(&quot;INSERT INTO STUDENTS(STUD_ID,NAME,EMAIL,ADDR_ID, PHONE)  </span><br><span class="line">            VALUES(#&#123;studId&#125;,#&#123;name&#125;,#&#123;email&#125;,#&#123;address.addrId&#125;,#&#123;phone&#125;)&quot;)  </span><br><span class="line">    int insertStudent(Student student);  </span><br><span class="line">&#125;</span><br><span class="line">``` </span><br><span class="line"></span><br><span class="line">使用了 `@Insert` 注解的 insertMethod() 方法将返回 insert 语句执行后影响的行数。 </span><br><span class="line"></span><br><span class="line">&lt;!--more--&gt;</span><br><span class="line"></span><br><span class="line">#### 自动生成主键 </span><br><span class="line">我们可以使用 `@Options` 注解的 `userGeneratedKeys` 和 `keyProperty` 属性让数据库产生 auto_increment（自增长）列的值，然后将生成的值设置到输入参数对象的属性中。 </span><br><span class="line">``` </span><br><span class="line">@Insert(&quot;INSERT INTO STUDENTS(NAME,EMAIL,ADDR_ID, PHONE)  </span><br><span class="line">        VALUES(#&#123;name&#125;,#&#123;email&#125;,#&#123;address.addrId&#125;,#&#123;phone&#125;)&quot;)  </span><br><span class="line">@Options(useGeneratedKeys = true, keyProperty = &quot;studId&quot;)  </span><br><span class="line">int insertStudent(Student student);  </span><br><span class="line">``` </span><br><span class="line"></span><br><span class="line">这里 STUD_ID 列值将会通过MySQL数据库自动生成。并且生成的值将会被设置到 student 对象的 studId 属性中。 </span><br><span class="line"></span><br><span class="line">``` </span><br><span class="line">StudentMapper mapper = sqlSession.getMapper(StudentMapper.class);  </span><br><span class="line">mapper.insertStudent(student);  </span><br><span class="line">long studentId = student.getStudId(); </span><br><span class="line">``` </span><br><span class="line"></span><br><span class="line">有一些数据库如 Oracle，并不支持 AUTO_INCREMENT 列属性，它使用序列（SEQUENCE）来产生主键的值。</span><br><span class="line">我们可以使用 `@SelectKey` 注解来为任意 SQL 语句来指定主键值，作为主键列的值。</span><br><span class="line"></span><br><span class="line">假设我们有一个名为 `STUD_ID_SEQ` 的序列来生成 `STUD_ID` 主键值。 </span><br><span class="line"></span><br><span class="line">``` </span><br><span class="line">@Insert(&quot;INSERT INTO STUDENTS(STUD_ID,NAME,EMAIL,ADDR_ID, PHONE)   </span><br><span class="line">VALUES(#&#123;studId&#125;,#&#123;name&#125;,#&#123;email&#125;,#&#123;address.addrId&#125;,#&#123;phone&#125;)&quot;)  </span><br><span class="line">@SelectKey(statement=&quot;SELECT STUD_ID_SEQ.NEXTVAL FROM DUAL&quot;,   </span><br><span class="line">keyProperty=&quot;studId&quot;, resultType=long.class, before=true)  </span><br><span class="line">int insertStudent(Student student); </span><br><span class="line">``` </span><br><span class="line"></span><br><span class="line">这里我们使用了 `@SelectKey` 来生成主键值，并且存储到了 student 对象的 studId 属性上。由于我们设置了 `before=true`，该语句将会在执行 INSERT 语句之前执行。</span><br><span class="line"></span><br><span class="line">如果你使用序列作为触发器来设置主键值，我们可以在 INSERT 语句执行后，从 `sequence_name.currval` 获取数据库产生的主键值。 </span><br><span class="line">``` </span><br><span class="line">@Insert(&quot;INSERT INTO STUDENTS(NAME,EMAIL,ADDR_ID, PHONE)   </span><br><span class="line">VALUES(#&#123;name&#125;,#&#123;email&#125;,#&#123;address.addrId&#125;,#&#123;phone&#125;)&quot;)  </span><br><span class="line">@SelectKey(statement=&quot;SELECT STUD_ID_SEQ.CURRVAL FROM DUAL&quot;,   </span><br><span class="line">keyProperty=&quot;studId&quot;, resultType=long.class, before=false)  </span><br><span class="line">int insertStudent(Student student);  </span><br><span class="line">``` </span><br><span class="line"></span><br><span class="line">### @Update </span><br><span class="line">我们可以使用 `@Update` 注解来定义一个UPDATE映射语句，如下所示： </span><br><span class="line">``` </span><br><span class="line">@Update(&quot;UPDATE STUDENTS SET NAME=#&#123;name&#125;, EMAIL=#&#123;email&#125;,   </span><br><span class="line">PHONE=#&#123;phone&#125; WHERE STUD_ID=#&#123;studId&#125;&quot;)  </span><br><span class="line">int updateStudent(Student student); </span><br><span class="line">``` </span><br><span class="line"></span><br><span class="line">使用了 `@Update` 的 `updateStudent()` 方法将会返回执行了 update 语句后影响的行数。 </span><br><span class="line"></span><br><span class="line">``` </span><br><span class="line">StudentMapper mapper = sqlSession.getMapper(StudentMapper.class);  </span><br><span class="line">int noOfRowsUpdated = mapper.updateStudent(student); </span><br><span class="line">``` </span><br><span class="line"></span><br><span class="line">### @Delete </span><br><span class="line">我们可以使用 `@Delete` 注解来定义一个 DELETE 映射语句，如下所示： </span><br><span class="line">``` </span><br><span class="line">@Delete(&quot;DELETE FROM STUDENTS WHERE STUD_ID=#&#123;studId&#125;&quot;)  </span><br><span class="line">int deleteStudent(long studId); </span><br><span class="line">``` </span><br><span class="line"></span><br><span class="line">使用了 `@Delete` 的 `deleteStudent()` 方法将会返回执行了 delete 语句后影响的行数。</span><br><span class="line"></span><br><span class="line">### @Select </span><br><span class="line">我们可以使用 `@Select` 注解来定义一个 SELECT 映射语句，如下所示： </span><br><span class="line">``` </span><br><span class="line">package com.mybatis3.mappers;  </span><br><span class="line">public interface StudentMapper  </span><br><span class="line">&#123;  </span><br><span class="line">    @Select(&quot;SELECT STUD_ID AS STUDID, NAME, EMAIL, PHONE FROM  </span><br><span class="line">            STUDENTS WHERE STUD_ID=#&#123;studId&#125;&quot;)  </span><br><span class="line">    Student findStudentById(long studId);  </span><br><span class="line">&#125;</span><br><span class="line">``` </span><br><span class="line"></span><br><span class="line">为了将列名和 Student bean 属性名匹配，我们为 stud_id 起了一个 studId 的别名。如果返回了多行结果，将抛出 `TooManyResultsException` 异常。 </span><br><span class="line"></span><br><span class="line">## 结果映射 </span><br><span class="line">我们可以将查询结果通过别名或者是 `@Results` 注解与 JavaBean 属性映射起来。 </span><br><span class="line">现在让我们看看怎样使用 `@Results` 注解将指定列与指定 JavaBean 属性映射器来，执行 SELECT 查询的： </span><br><span class="line">``` </span><br><span class="line">package com.mybatis3.mappers;  </span><br><span class="line">public interface StudentMapper  </span><br><span class="line">&#123;  </span><br><span class="line">    @Select(&quot;SELECT * FROM STUDENTS&quot;)  </span><br><span class="line">    @Results(  </span><br><span class="line">    &#123;  </span><br><span class="line">        @Result(id = true, column = &quot;stud_id&quot;, property = &quot;studId&quot;),  </span><br><span class="line">        @Result(column = &quot;name&quot;, property = &quot;name&quot;),  </span><br><span class="line">        @Result(column = &quot;email&quot;, property = &quot;email&quot;),  </span><br><span class="line">        @Result(column = &quot;addr_id&quot;, property = &quot;address.addrId&quot;)  </span><br><span class="line">    &#125;)  </span><br><span class="line">    List&lt;Student&gt; findAllStudents();  </span><br><span class="line">&#125; </span><br><span class="line">``` </span><br><span class="line"></span><br><span class="line">&gt; `@Results` 注解和映射器 XML 配置文件元素 `&lt;resultMap&gt;` 相对应，然而，`Mybatis3.2.2` 不能为 `@Results` 注解赋予一个 ID。所以，不像 `&lt;resultMap&gt;` 元素，我们不应该在不同的映射语句中重用 `@Results` 声明。</span><br><span class="line">&gt; 这意味着即使 `@Results` 注解完全相同，我们也需要（在不同的映射接口中）重复 `@Results` 声明。 </span><br><span class="line"></span><br><span class="line">例如，看下面的 findStudentById() 和 findAllStudents() 方法： </span><br><span class="line">``` </span><br><span class="line">@Select(&quot;SELECT * FROM STUDENTS WHERE STUD_ID=#&#123;studId&#125;&quot;)  </span><br><span class="line">@Results(  </span><br><span class="line">&#123;  </span><br><span class="line">    @Result(id = true, column = &quot;stud_id&quot;, property = &quot;studId&quot;),  </span><br><span class="line">    @Result(column = &quot;name&quot;, property = &quot;name&quot;),  </span><br><span class="line">    @Result(column = &quot;email&quot;, property = &quot;email&quot;),  </span><br><span class="line">    @Result(column = &quot;addr_id&quot;, property = &quot;address.addrId&quot;)  </span><br><span class="line">&#125;)  </span><br><span class="line">Student findStudentById(int studId);  </span><br><span class="line">    </span><br><span class="line">@Select(&quot;SELECT * FROM STUDENTS&quot;)  </span><br><span class="line">@Results(  </span><br><span class="line">&#123;  </span><br><span class="line">    @Result(id = true, column = &quot;stud_id&quot;, property = &quot;studId&quot;),  </span><br><span class="line">    @Result(column = &quot;name&quot;, property = &quot;name&quot;),  </span><br><span class="line">    @Result(column = &quot;email&quot;, property = &quot;email&quot;),  </span><br><span class="line">    @Result(column = &quot;addr_id&quot;, property = &quot;address.addrId&quot;)  </span><br><span class="line">&#125;)  </span><br><span class="line">List&lt;Student&gt; findAllStudents(); </span><br><span class="line">```  </span><br><span class="line"></span><br><span class="line">这里两个语句的` @Results` 配置完全相同，但是我必须得重复它。这里有一个解决方法。我们可以创建一个映射器 Mapper 配置文件， 然后配置 `&lt;resultMap&gt;` 元素，然后使用 `@ResultMap` 注解引用此 `&lt;resultMap&gt;`。</span><br><span class="line"></span><br><span class="line">在 StudentMapper.xml 中定义一个 ID 为 StudentResult 的 `&lt;resultMap&gt;` ： </span><br><span class="line">``` </span><br><span class="line">&lt;mapper namespace=&quot;com.mybatis3.mappers.StudentMapper&quot;&gt;  </span><br><span class="line">  &lt;resultMap type=&quot;Student&quot; id=&quot;StudentResult&quot;&gt;  </span><br><span class="line">    &lt;id property=&quot;studId&quot; column=&quot;stud_id&quot; /&gt;  </span><br><span class="line">    &lt;result property=&quot;name&quot; column=&quot;name&quot; /&gt;  </span><br><span class="line">    &lt;result property=&quot;email&quot; column=&quot;email&quot; /&gt;  </span><br><span class="line">    &lt;result property=&quot;phone&quot; column=&quot;phone&quot; /&gt;  </span><br><span class="line">  &lt;/resultMap&gt;  </span><br><span class="line">&lt;/mapper&gt; </span><br><span class="line">``` </span><br><span class="line"></span><br><span class="line">在 StudentMapper.java 中，使用 `@ResultMap` 引用名为 StudentResult 的 resultMap： </span><br><span class="line">``` </span><br><span class="line">public interface StudentMapper &#123;  </span><br><span class="line">    @Select(&quot;SELECT * FROM STUDENTS WHERE STUD_ID=#&#123;studId&#125;&quot;)  </span><br><span class="line">    @ResultMap(&quot;com.mybatis3.mappers.StudentMapper.StudentResult&quot;)  </span><br><span class="line">    Student findStudentById(long studId);  </span><br><span class="line">      </span><br><span class="line">    @Select(&quot;SELECT * FROM STUDENTS&quot;)  </span><br><span class="line">    @ResultMap(&quot;com.mybatis3.mappers.StudentMapper.StudentResult&quot;)  </span><br><span class="line">    List&lt;Student&gt; findAllStudents();  </span><br><span class="line">&#125;  </span><br><span class="line">``` </span><br><span class="line"></span><br><span class="line">### 一对一映射 </span><br><span class="line">MyBatis 提供了 `@One` 注解来使用嵌套 select 语句（Nested-Select）加载一对一关联查询数据。让我们看看怎样使 `用@One` 注解获取学生及其地址信息。</span><br><span class="line">``` </span><br><span class="line">public interface StudentMapper &#123;  </span><br><span class="line">    @Select(&quot;SELECT ADDR_ID AS ADDRID, STREET, CITY, STATE, ZIP, COUNTRY  </span><br><span class="line">            FROM ADDRESSES WHERE ADDR_ID=#&#123;id&#125;&quot;)  </span><br><span class="line">    Address findAddressById(long id);  </span><br><span class="line">       </span><br><span class="line">    @Select(&quot;SELECT * FROM STUDENTS WHERE STUD_ID=#&#123;studId&#125; &quot;)  </span><br><span class="line">    @Results(  </span><br><span class="line">    &#123;  </span><br><span class="line">        @Result(id = true, column = &quot;stud_id&quot;, property = &quot;studId&quot;),  </span><br><span class="line">        @Result(column = &quot;name&quot;, property = &quot;name&quot;),  </span><br><span class="line">        @Result(column = &quot;email&quot;, property = &quot;email&quot;),  </span><br><span class="line">        @Result(property = &quot;address&quot;, column = &quot;addr_id&quot;,  </span><br><span class="line">        one = @One(select = &quot;com.mybatis3.mappers.StudentMapper.findAddressById&quot;))  </span><br><span class="line">    &#125;)  </span><br><span class="line">    Student selectStudentWithAddress(long studId);  </span><br><span class="line">&#125; </span><br><span class="line">```  </span><br><span class="line"></span><br><span class="line">这里我们使用了 `@One` 注解的 select 属性来指定一个使用了完全限定名的方法上，该方法会返回一个 Address 对象。使用 `column=”addr_id”` ，则 STUDENTS 表中列 addr_id 的值将会作为输入参数传递给 findAddressById() 方法。如果 `@One` SELECT 查询返回了多行结果，则会抛出 `TooManyResultsException` 异常。</span><br><span class="line"></span><br><span class="line">``` </span><br><span class="line">long studId = 1;  </span><br><span class="line">StudentMapper studentMapper =   </span><br><span class="line">    sqlSession.getMapper(StudentMapper.class);  </span><br><span class="line">Student student = studentMapper.selectStudentWithAddress(studId);  </span><br><span class="line">System.out.println(&quot;Student :&quot;+student);  </span><br><span class="line">System.out.println(&quot;Address :&quot;+student.getAddress()); </span><br><span class="line">```  </span><br><span class="line"></span><br><span class="line">在使用 XML 配置 SQL 映射器中，我们可以通过基于 XML 的映射器配置，使用嵌套结果 ResultMap 来加载一对一关联的查询。而 `MyBatis3.2.2` 版本，并没有对应的注解支持。但是我们可以在映射器 Mapper 配置文件中配置 `&lt;resultMap&gt;` 并且使用 `@ResultMap` 注解来引用它。</span><br><span class="line">在 StudentMapper.xml 中配置 `&lt;resultMap&gt;` ，如下所示： </span><br><span class="line">``` </span><br><span class="line">&lt;mapper namespace=&quot;com.mybatis3.mappers.StudentMapper&quot;&gt;  </span><br><span class="line">  &lt;resultMap type=&quot;Address&quot; id=&quot;AddressResult&quot;&gt;  </span><br><span class="line">    &lt;id property=&quot;addrId&quot; column=&quot;addr_id&quot; /&gt;  </span><br><span class="line">    &lt;result property=&quot;street&quot; column=&quot;street&quot; /&gt;  </span><br><span class="line">    &lt;result property=&quot;city&quot; column=&quot;city&quot; /&gt;  </span><br><span class="line">    &lt;result property=&quot;state&quot; column=&quot;state&quot; /&gt;  </span><br><span class="line">    &lt;result property=&quot;zip&quot; column=&quot;zip&quot; /&gt;  </span><br><span class="line">    &lt;result property=&quot;country&quot; column=&quot;country&quot; /&gt;  </span><br><span class="line">  &lt;/resultMap&gt;  </span><br><span class="line">  &lt;resultMap type=&quot;Student&quot; id=&quot;StudentWithAddressResult&quot;&gt;  </span><br><span class="line">    &lt;id property=&quot;studId&quot; column=&quot;stud_id&quot; /&gt;  </span><br><span class="line">    &lt;result property=&quot;name&quot; column=&quot;name&quot; /&gt;  </span><br><span class="line">    &lt;result property=&quot;email&quot; column=&quot;email&quot; /&gt;  </span><br><span class="line">    &lt;association property=&quot;address&quot; resultMap=&quot;AddressResult&quot; /&gt;  </span><br><span class="line">  &lt;/resultMap&gt;  </span><br><span class="line">&lt;/mapper&gt; </span><br><span class="line">``` </span><br><span class="line"></span><br><span class="line">``` </span><br><span class="line">public interface StudentMapper  </span><br><span class="line">&#123;  </span><br><span class="line">    @Select(&quot;select stud_id, name, email, a.addr_id, street, city,  </span><br><span class="line">            state, zip, country&quot; + &quot; FROM students s left outer join addresses a  </span><br><span class="line">            on s.addr_id=a.addr_id&quot; + &quot; where stud_id=#&#123;studId&#125; &quot;)  </span><br><span class="line">    @ResultMap(&quot;com.mybatis3.mappers.StudentMapper.  </span><br><span class="line">               StudentWithAddressResult&quot;)  </span><br><span class="line">    Student selectStudentWithAddress(long id);  </span><br><span class="line">&#125; </span><br><span class="line">```  </span><br><span class="line"></span><br><span class="line">### 一对多映射 </span><br><span class="line">MyBatis 提供了 `@Many` 注解，用来使用嵌套 Select 语句加载一对多关联查询。 </span><br><span class="line">现在让我们看一下如何使用 `@Many` 注解获取一个讲师及其教授课程列表信息： </span><br><span class="line">``` </span><br><span class="line">public interface TutorMapper  </span><br><span class="line">&#123;  </span><br><span class="line">    @Select(&quot;select addr_id as addrId, street, city, state, zip,  </span><br><span class="line">            country from addresses where addr_id=#&#123;id&#125;&quot;)  </span><br><span class="line">    Address findAddressById(int id);  </span><br><span class="line">       </span><br><span class="line">    @Select(&quot;select * from courses where tutor_id=#&#123;tutorId&#125;&quot;)  </span><br><span class="line">    @Results(  </span><br><span class="line">    &#123;  </span><br><span class="line">        @Result(id = true, column = &quot;course_id&quot;, property = &quot;courseId&quot;),  </span><br><span class="line">        @Result(column = &quot;name&quot;, property = &quot;name&quot;),  </span><br><span class="line">        @Result(column = &quot;description&quot;, property = &quot;description&quot;),  </span><br><span class="line">        @Result(column = &quot;start_date&quot; property = &quot;startDate&quot;),  </span><br><span class="line">        @Result(column = &quot;end_date&quot; property = &quot;endDate&quot;)  </span><br><span class="line">    &#125;)  </span><br><span class="line">    List&lt;Course&gt; findCoursesByTutorId(int tutorId);  </span><br><span class="line">        </span><br><span class="line">    @Select(&quot;SELECT tutor_id, name as tutor_name, email, addr_id  </span><br><span class="line">            FROM tutors where tutor_id=#&#123;tutorId&#125;&quot;)  </span><br><span class="line">    @Results(  </span><br><span class="line">    &#123;  </span><br><span class="line">        @Result(id = true, column = &quot;tutor_id&quot;, property = &quot;tutorId&quot;),  </span><br><span class="line">        @Result(column = &quot;tutor_name&quot;, property = &quot;name&quot;),  </span><br><span class="line">        @Result(column = &quot;email&quot;, property = &quot;email&quot;),  </span><br><span class="line">        @Result(property = &quot;address&quot;, column = &quot;addr_id&quot;,  </span><br><span class="line">        one = @One(select = &quot; com.mybatis3.  </span><br><span class="line">        mappers.TutorMapper.findAddressById&quot;)),  </span><br><span class="line">        @Result(property = &quot;courses&quot;, column = &quot;tutor_id&quot;,  </span><br><span class="line">        many = @Many(select = &quot;com.mybatis3.mappers.TutorMapper.  </span><br><span class="line">        findCoursesByTutorId&quot;))  </span><br><span class="line">    &#125;)  </span><br><span class="line">    Tutor findTutorById(int tutorId);  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>这里我们使用了 <code>@Many</code> 注解的 select 属性来指向一个完全限定名称的方法，该方法将返回一个 List<course> 对象。使用 <code>column=”tutor_id”</code> ，TUTORS 表中的 tutor_id 列值将会作为输入参数传递给 findCoursesByTutorId() 方法。</course></p>
<p>使用 XML 配置 SQL 映射器中，我们可以通过基于 XML 的映射器配置，使用嵌套结果 ResultMap 来加载一对多关联的查询。而 <code>MyBatis3.2.2</code> 版本，并没有对应的注解支持。但是我们可以在映射器 Mapper 配置文件中配置 <code>&lt;resultMap&gt;</code> 并且使用 <code>@ResultMap</code> 注解来引用它。<br>在 TutorMapper.xml 中配置 <code>&lt;resultMap&gt;</code> ，如下所示： </p>
<pre><code>&lt;mapper namespace=&quot;com.mybatis3.mappers.TutorMapper&quot;&gt;  
  &lt;resultMap type=&quot;Address&quot; id=&quot;AddressResult&quot;&gt;  
    &lt;id property=&quot;addrId&quot; column=&quot;addr_id&quot; /&gt;  
    &lt;result property=&quot;street&quot; column=&quot;street&quot; /&gt;  
    &lt;result property=&quot;city&quot; column=&quot;city&quot; /&gt;  
    &lt;result property=&quot;state&quot; column=&quot;state&quot; /&gt;  
    &lt;result property=&quot;zip&quot; column=&quot;zip&quot; /&gt;  
    &lt;result property=&quot;country&quot; column=&quot;country&quot; /&gt;  
  &lt;/resultMap&gt;  
  &lt;resultMap type=&quot;Course&quot; id=&quot;CourseResult&quot;&gt;  
    &lt;id column=&quot;course_id&quot; property=&quot;courseId&quot; /&gt;  
    &lt;result column=&quot;name&quot; property=&quot;name&quot; /&gt;  
    &lt;result column=&quot;description&quot; property=&quot;description&quot; /&gt;  
    &lt;result column=&quot;start_date&quot; property=&quot;startDate&quot; /&gt;  
    &lt;result column=&quot;end_date&quot; property=&quot;endDate&quot; /&gt;  
  &lt;/resultMap&gt;  
  &lt;resultMap type=&quot;Tutor&quot; id=&quot;TutorResult&quot;&gt;  
    &lt;id column=&quot;tutor_id&quot; property=&quot;tutorId&quot; /&gt;  
    &lt;result column=&quot;tutor_name&quot; property=&quot;name&quot; /&gt;  
    &lt;result column=&quot;email&quot; property=&quot;email&quot; /&gt;  
    &lt;association property=&quot;address&quot; resultMap=&quot;AddressResult&quot; /&gt;  
    &lt;collection property=&quot;courses&quot; resultMap=&quot;CourseResult&quot; /&gt;  
  &lt;/resultMap&gt;  
&lt;/mapper&gt; </code></pre><pre><code>public interface TutorMapper  
{  
    @Select(&quot;SELECT T.TUTOR_ID, T.NAME AS TUTOR_NAME, EMAIL,  
            A.ADDR_ID, STREET, CITY, STATE, ZIP, COUNTRY, COURSE_ID, C.NAME,  
            DESCRIPTION, START_DATE, END_DATE  FROM TUTORS T LEFT OUTER  
            JOIN ADDRESSES A ON T.ADDR_ID=A.ADDR_ID LEFT OUTER JOIN COURSES  
            C ON T.TUTOR_ID=C.TUTOR_ID WHERE T.TUTOR_ID=#{tutorId}&quot;)  
    @ResultMap(&quot;com.mybatis3.mappers.TutorMapper.TutorResult&quot;)  
    Tutor selectTutorById(int tutorId);  
} </code></pre><h2 id="动态-SQL"><a href="#动态-SQL" class="headerlink" title="动态 SQL"></a>动态 SQL</h2><p>有时候我们需要根据输入条件动态地构建 SQL 语句。MyBatis 提供了各种注解如 <code>@InsertProvider</code> ， <code>@UpdateProvider</code> ， <code>@DeleteProvider</code> 和 <code>@SelectProvider</code> ，来帮助构建动态 SQL 语句，然后让 MyBatis 执行这些 SQL 语句。 </p>
<h3 id="SelectProvider"><a href="#SelectProvider" class="headerlink" title="@SelectProvider"></a>@SelectProvider</h3><p>现在让我们来看一个使用 <code>@SelectProvider</code> 注解来创建一个简单的 SELECT 映射语句的例子。<br>创建一个 TutorDynaSqlProvider.java 类，以及 findTutorByIdSql() 方法，如下所示： </p>
<pre><code>package com.mybatis3.sqlproviders;  
import org.apache.ibatis.jdbc.SQL;  
public class TutorDynaSqlProvider {  
    public String findTutorByIdSql(long tutorId) {  
        return &quot;SELECT TUTOR_ID AS tutorId, NAME, EMAIL FROM TUTORS  
               WHERE TUTOR_ID=&quot; + tutorId;  
    }  
}  </code></pre><p>在 TutorMapper.java 接口中创建一个映射语句，如下： </p>
<pre><code>@SelectProvider(type=TutorDynaSqlProvider.class, method=&quot;findTutorByIdSql&quot;)  
Tutor findTutorById(long tutorId);  </code></pre><p>这里我们使用了 <code>@SelectProvider</code> 来指定了一个类，及其内部的方法，用来提供需要执行的 SQL 语句。 </p>
<p>但是使用字符串拼接的方法来构建 SQL 语句是非常困难的，并且容易出错。所以MyBaits提供了一个SQL工具类不使用字符串拼接的方式，简化构造动态SQL语句。</p>
<p>现在，让我们看看如何使用 <code>org.apache.ibatis.jdbc.SQL</code> 工具类来准备相同的 SQL 语句： </p>
<pre><code>package com.mybatis3.sqlproviders;  
import org.apache.ibatis.jdbc.SQL;  
public class TutorDynaSqlProvider {  
    public String findTutorByIdSql(final long tutorId) {  
        return new SQL() 
        {  
            {  
                SELECT(&quot;tutor_id as tutorId, name, email&quot;);  
                FROM(&quot;tutors&quot;);  
                WHERE(&quot;tutor_id=&quot; + tutorId);  
            }  
        }.toString();  
    }  
}</code></pre><p>SQ L工具类会处理以合适的空格前缀和后缀来构造 SQL 语句。</p>
<p>动态 SQL provider 方法可以接收以下其中一种参数： </p>
<ul>
<li>无参数 </li>
<li>和映射器 Mapper 接口的方法同类型的参数 </li>
<li><code>java.util.Map</code> </li>
</ul>
<h4 id="使用不带参数的-SQL-Provider"><a href="#使用不带参数的-SQL-Provider" class="headerlink" title="使用不带参数的 SQL Provider"></a>使用不带参数的 SQL Provider</h4><pre><code>public String findTutorByIdSql()  
{  
    return new SQL()  
    {  
        {  
            SELECT(&quot;tutor_id as tutorId, name, email&quot;);  
            FROM(&quot;tutors&quot;);  
            WHERE(&quot;tutor_id = #{tutorId}&quot;);  
        }  
    }.toString();  
}  </code></pre><p>这里我们没有使用输入参数构造 SQL 语句，所以它可以是一个无参方法。 </p>
<h4 id="使用和映射器-Mapper-接口的方法同类型的参数"><a href="#使用和映射器-Mapper-接口的方法同类型的参数" class="headerlink" title="使用和映射器 Mapper 接口的方法同类型的参数"></a>使用和映射器 Mapper 接口的方法同类型的参数</h4><p>如果映射器 Mapper 接口方法只有一个参数，那么可以定义 SQL Provider 方法，它接受一个与 Mapper 接口方法相同类型的参数。<br>例如映射器 Mapper 接口有如下定义： </p>
<pre><code>Tutor findTutorById(long tutorId); </code></pre><p>这里 findTutorById(int) 方法只有一个 long 类型的参数。我们可以定义 findTutorByIdSql(long) 方法作为 SQL provider 方法： </p>
<pre><code>public String findTutorByIdSql(final long tutorId)  
{  
    return new SQL()  
    {  
        {  
            SELECT(&quot;tutor_id as tutorId, name, email&quot;);  
            FROM(&quot;tutors&quot;);  
            WHERE(&quot;tutor_id=&quot; + tutorId);  
        }  
    }.toString();  
} </code></pre><h4 id="使用-java-util-Map-参数类型的-SQL-Provider"><a href="#使用-java-util-Map-参数类型的-SQL-Provider" class="headerlink" title="使用 java.util.Map 参数类型的 SQL Provider"></a>使用 <code>java.util.Map</code> 参数类型的 SQL Provider</h4><p>如果映射器 Mapper 接口有多个输入参数，我们可以使用参数类型为 <code>java.util.Map</code> 的方法作为 SQL Provider 方法。然后映射器 Mapper 接口方法所有的输入参数将会被放到 map 中，以 param1，param2 等等作为 key，将输入参数按序作为 value。你也可以使用 0，1，2 等作为 key 值来取的输入参数： </p>
<pre><code>@SelectProvider(type = TutorDynaSqlProvider.class,  
                method = &quot;findTutorByNameAndEmailSql&quot;)  
Tutor findTutorByNameAndEmail(String name, String email);  

public String findTutorByNameAndEmailSql(Map&lt;String, Object&gt; map) {  
    String name = (String) map.get(&quot;param1&quot;);  
    String email = (String) map.get(&quot;param2&quot;);  
    //you can also get those values using 0,1 keys  
    //String name = (String) map.get(&quot;0&quot;);  
    //String email = (String) map.get(&quot;1&quot;);  
    return new SQL()  
    {  
        {  
            SELECT(&quot;tutor_id as tutorId, name, email&quot;);  
            FROM(&quot;tutors&quot;);  
            WHERE(&quot;name=#{name} AND email=#{email}&quot;);  
        }  
    }.toString();  
} </code></pre><p>SQL 工具类也提供了其他的方法来表示 <code>JOINS</code> ， <code>ORDER_BY</code> ， <code>GROUP_BY</code> 等等。<br>让我们看一个使用 <code>LEFT_OUTER_JOIN</code> 的例子： </p>
<pre><code>public class TutorDynaSqlProvider {  
    public String selectTutorById() {  
        return new SQL()  
        {  
            {  
                SELECT(&quot;t.tutor_id, t.name as tutor_name, email&quot;);  
                SELECT(&quot;a.addr_id, street, city, state, zip, country&quot;);  
                SELECT(&quot;course_id, c.name as course_name, description,  
                       start_date, end_date&quot;);  
                FROM(&quot;TUTORS t&quot;);  
                LEFT_OUTER_JOIN(&quot;addresses a on t.addr_id=a.addr_id&quot;);  
                LEFT_OUTER_JOIN(&quot;courses c on t.tutor_id=c.tutor_id&quot;);  
                WHERE(&quot;t.TUTOR_ID = #{id}&quot;);  
            }  
        }.toString();  
    }  
}  

public interface TutorMapper {  
    @SelectProvider(type = TutorDynaSqlProvider.class,  
                    method = &quot;selectTutorById&quot;)  
    @ResultMap(&quot;com.mybatis3.mappers.TutorMapper.TutorResult&quot;)  
    Tutor selectTutorById(int tutorId);  
} </code></pre><p>由于没有支持使用内嵌结果 ResultMap 的一对多关联映射的注解支持，我们可以使用基于 XML 的 <code>&lt;resultMap&gt;</code> 配置，然后与 <code>@ResultMap</code> 映射： </p>
<pre><code>&lt;mapper namespace=&quot;com.mybatis3.mappers.TutorMapper&quot;&gt;  
  &lt;resultMap type=&quot;Address&quot; id=&quot;AddressResult&quot;&gt;  
    &lt;id property=&quot;id&quot; column=&quot;addr_id&quot; /&gt;  
    &lt;result property=&quot;street&quot; column=&quot;street&quot; /&gt;  
    &lt;result property=&quot;city&quot; column=&quot;city&quot; /&gt;  
    &lt;result property=&quot;state&quot; column=&quot;state&quot; /&gt;  
    &lt;result property=&quot;zip&quot; column=&quot;zip&quot; /&gt;  
    &lt;result property=&quot;country&quot; column=&quot;country&quot; /&gt;  
  &lt;/resultMap&gt;  
  &lt;resultMap type=&quot;Course&quot; id=&quot;CourseResult&quot;&gt;  
    &lt;id column=&quot;course_id&quot; property=&quot;id&quot; /&gt;  
    &lt;result column=&quot;course_name&quot; property=&quot;name&quot; /&gt;  
    &lt;result column=&quot;description&quot; property=&quot;description&quot; /&gt;  
    &lt;result column=&quot;start_date&quot; property=&quot;startDate&quot; /&gt;  
    &lt;result column=&quot;end_date&quot; property=&quot;endDate&quot; /&gt;  
  &lt;/resultMap&gt;  
  &lt;resultMap type=&quot;Tutor&quot; id=&quot;TutorResult&quot;&gt;  
    &lt;id column=&quot;tutor_id&quot; property=&quot;id&quot; /&gt;  
    &lt;result column=&quot;tutor_name&quot; property=&quot;name&quot; /&gt;  
    &lt;result column=&quot;email&quot; property=&quot;email&quot; /&gt;  
    &lt;association property=&quot;address&quot; resultMap=&quot;AddressResult&quot; /&gt;  
    &lt;collection property=&quot;courses&quot; resultMap=&quot;CourseResult&quot;&gt;&lt;/collection&gt;  
  &lt;/resultMap&gt;  
&lt;/mapper&gt;  </code></pre><h3 id="InsertProvider"><a href="#InsertProvider" class="headerlink" title="@InsertProvider"></a>@InsertProvider</h3><p>我们可以使用 <code>@InsertProvider</code> 注解创建动态的 INSERT 语句，如下所示： </p>
<pre><code>public class TutorDynaSqlProvider {  
    public String insertTutor(final Tutor tutor) {  
        return new SQL()  
        {  
            {  
                INSERT_INTO(&quot;TUTORS&quot;);  
                if (tutor.getName() != null)  
                {  
                    VALUES(&quot;NAME&quot;, &quot;#{name}&quot;);  
                }  
                if (tutor.getEmail() != null)  
                {  
                    VALUES(&quot;EMAIL&quot;, &quot;#{email}&quot;);  
                }  
            }  
        }.toString();  
    }  
}   

public interface TutorMapper {  
    @InsertProvider(type = TutorDynaSqlProvider.class,  
                    method = &quot;insertTutor&quot;)  
    @Options(useGeneratedKeys = true, keyProperty = &quot;tutorId&quot;)  
    int insertTutor(Tutor tutor);  
} </code></pre><h3 id="UpdateProvider"><a href="#UpdateProvider" class="headerlink" title="@UpdateProvider"></a>@UpdateProvider</h3><p>我们可以通过 <code>@UpdateProvider</code> 注解创建 UPDATE 语句，如下所示： </p>
<pre><code>public class TutorDynaSqlProvider {  
    public String updateTutor(final Tutor tutor) {  
        return new SQL()  
        {  
            {  
                UPDATE(&quot;TUTORS&quot;);  
                if (tutor.getName() != null)  
                {  
                    SET(&quot;NAME = #{name}&quot;);  
                }  
                if (tutor.getEmail() != null)  
                {  
                    SET(&quot;EMAIL = #{email}&quot;);  
                }  
                WHERE(&quot;TUTOR_ID = #{tutorId}&quot;);  
            }  
        }.toString();  
    }  
}   

public interface TutorMapper {  
    @UpdateProvider(type = TutorDynaSqlProvider.class,  
                    method = &quot;updateTutor&quot;)  
    int updateTutor(Tutor tutor);  
}</code></pre><h3 id="DeleteProvider"><a href="#DeleteProvider" class="headerlink" title="@DeleteProvider"></a>@DeleteProvider</h3><p>我们可以使用 <code>@DeleteProvider</code> 注解创建动态地 DELETE 语句,如下所示： </p>
<pre><code>public class TutorDynaSqlProvider {  
    public String deleteTutor(long tutorId) {  
        return new SQL()  
        {  
            {  
                DELETE_FROM(&quot;TUTORS&quot;);  
                WHERE(&quot;TUTOR_ID = #{tutorId}&quot;);  
            }  
        } .toString();  
    }  
}  

public interface TutorMapper {  
    @DeleteProvider(type = TutorDynaSqlProvider.class,  
                    method = &quot;deleteTutor&quot;)  
    int deleteTutor(long tutorId);  
}  </code></pre><blockquote>
<p><a href="http://blog.csdn.net/luanlouis/article/details/35780175" target="_blank" rel="noopener">Java Persistence with MyBatis 3(中文版) 第四章 使用注解配置SQL映射器</a></p>
</blockquote>

      
    </div>
    
    
    

    

    
      <div class="post-share">分享到：</div>
    

    
      <div>
        <div style="padding: 10px 0; margin: 20px auto; width: 90%; text-align: center;">
  <div></div>
  <button id="rewardButton" disable="enable" onclick="var qr = document.getElementById('QR'); if (qr.style.display === 'none') {qr.style.display='block';} else {qr.style.display='none'}">
    <span>赞赏</span>
  </button>
  <div id="QR" style="display: none;">

    
      <div id="wechat" style="display: inline-block">
        <img id="wechat_qr" src="/images/wechatpay.png" alt="wuchao 微信扫一扫，向我赞赏">
        <p>微信扫一扫，向我赞赏</p>
      </div>
    

    
      <div id="alipay" style="display: inline-block">
        <img id="alipay_qr" src="/images/alipay.png" alt="wuchao 支付宝扫一扫，向我赞赏">
        <p>支付宝扫一扫，向我赞赏</p>
      </div>
    

    

  </div>
</div>

      </div>
    

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/Mybatis/" rel="tag"># Mybatis</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2018/01/05/java-2018-01-05-Difference-between-Comparator-and-Comparable-in-Java/" rel="next" title="Difference between Comparator and Comparable in Java">
                <i class="fa fa-chevron-left"></i> Difference between Comparator and Comparable in Java
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2018/01/08/mybatis-2018-01-08-Mybatis-使用XML配置SQL映射器/" rel="prev" title="Mybatis - 使用 XML 配置 SQL 映射器">
                Mybatis - 使用 XML 配置 SQL 映射器 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          

  
    <div class="comments" id="comments">
      <div id="disqus_thread">
        <div class="disqus-loading">
          <strong>Disqus 加载中...</strong>
          <p>如果长时间无法加载，请针对 disq.us | disquscdn.com | disqus.com 启用代理</p>
        </div>
      </div>
    </div>

  





  

    
      <script type="text/javascript">
        if (disqus_config) {
          var disqus_config = function () {
            this.page.url = 'https://wuchao.github.io/2018/01/08/mybatis-2018-01-08-Mybatis-使用注解配置SQL映射器/';
            this.page.identifier = '2018/01/08/mybatis-2018-01-08-Mybatis-使用注解配置SQL映射器/';
            this.page.title = 'Mybatis - 使用注解配置 SQL 映射器';
          };
          if (window.DISQUS) {
            $('.disqus-loading').remove();
            window.DISQUS.reset({
              reload: true,
              config: function () {
                this.page.url = 'https://wuchao.github.io/2018/01/08/mybatis-2018-01-08-Mybatis-使用注解配置SQL映射器/';
                this.page.identifier = '2018/01/08/mybatis-2018-01-08-Mybatis-使用注解配置SQL映射器/';
                this.page.title = 'Mybatis - 使用注解配置 SQL 映射器';
              }
            });
          }
        }
        else {
          var disqus_config = function () {
            this.page.url = 'https://wuchao.github.io/2018/01/08/mybatis-2018-01-08-Mybatis-使用注解配置SQL映射器/';
            this.page.identifier = '2018/01/08/mybatis-2018-01-08-Mybatis-使用注解配置SQL映射器/';
            this.page.title = 'Mybatis - 使用注解配置 SQL 映射器';
          };
          var d = document, s = d.createElement('script');
          s.src = 'https://diygod-me.disqus.com/embed.js';
          s.setAttribute('data-timestamp', '' + +new Date());
          (d.head || d.body).appendChild(s);
        }
      </script>
    

  




	





  















        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image" src="/images/card.jpg" alt="wuchao">
            
              <p class="site-author-name" itemprop="name"></p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <div class="links-of-author motion-element">
            
              
                <span class="links-of-author-item">
                  <a href="https://github.com/wuchao" target="_blank" title="GitHub" data-balloon="GitHub" data-balloon-pos="up">
                    
                      <i class="fa fa-fw fa-github"></i></a>
                </span>
              
                <span class="links-of-author-item">
                  <a href="wu94726@gmail.com" target="_blank" title="邮箱" data-balloon="邮箱" data-balloon-pos="up">
                    
                      <i class="fa fa-fw fa-email"></i></a>
                </span>
              
            
          </div>

          

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives">
              
                  <span class="site-state-item-count">67</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">18</span>
                  <span class="site-state-item-name">分类</span>
                </a>
              </div>
            
            

          </nav>

          
          
            <div class="cc-license motion-element" itemprop="license">
              <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" class="cc-opacity" target="_blank">
                <img src="/images/cc-by-nc-sa.png" alt="Creative Commons">
              </a>
            </div>
          

          
          

          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#在映射器-Mapper-接口上使用-Mapper-注解"><span class="nav-number">1.</span> <span class="nav-text">在映射器 Mapper 接口上使用 @Mapper 注解</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#映射语句"><span class="nav-number">2.</span> <span class="nav-text">映射语句</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Insert"><span class="nav-number">2.1.</span> <span class="nav-text">@Insert</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#动态-SQL"><span class="nav-number">3.</span> <span class="nav-text">动态 SQL</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#SelectProvider"><span class="nav-number">3.1.</span> <span class="nav-text">@SelectProvider</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#使用不带参数的-SQL-Provider"><span class="nav-number">3.1.1.</span> <span class="nav-text">使用不带参数的 SQL Provider</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#使用和映射器-Mapper-接口的方法同类型的参数"><span class="nav-number">3.1.2.</span> <span class="nav-text">使用和映射器 Mapper 接口的方法同类型的参数</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#使用-java-util-Map-参数类型的-SQL-Provider"><span class="nav-number">3.1.3.</span> <span class="nav-text">使用 java.util.Map 参数类型的 SQL Provider</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#InsertProvider"><span class="nav-number">3.2.</span> <span class="nav-text">@InsertProvider</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#UpdateProvider"><span class="nav-number">3.3.</span> <span class="nav-text">@UpdateProvider</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#DeleteProvider"><span class="nav-number">3.4.</span> <span class="nav-text">@DeleteProvider</span></a></li></ol></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-image"></div>
      <div class="footer-inner">
        <p>博客已萌萌哒运行<span id="since"></span><span class="my-face">(●'◡'●)ﾉ♥</span></p>
<p></p>

<p>© <span itemprop="copyrightYear">2019</span> Keep Coding.
    由 <a href="https://hexo.io/" target="_blank" class="external" rel="nofollow">Hexo</a> 强力驱动.
    Theme By <a href="https://github.com/DIYgod/hexo-theme-sagiri" target="_blank" class="external" rel="nofollow">Sagiri</a> v0.0.4.
    
</p>
<p>Made with <i class="fa fa-heart throb" style="color: #d43f57;"></i> by <span class="author" itemprop="copyrightHolder">wuchao</span>. </p>

        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    <canvas id="evanyou" style="display:none;"></canvas>
    <canvas id="live2d" width="150" height="400" class="live2d" style="display:none;"></canvas>

    

  </div>

  <script type="text/javascript" src="/js/sagiri.min.js?v=0.0.4"></script>

  





  

  
  

  

  

  

</body>
</html>
